# Sie müssen in der Regel mindestens drei Jahre berufstätig gewesen sein und an einer Beratung durch die Agentur für Arbeit teilgenommen haben. Ein Bildungsgutschein kann Ihnen dann ausgestellt werden, wenn  die Weiterbildung notwendig ist, um Ihre Arbeitslosigkeit zu beenden oder eine drohende Arbeitslosigkeit abzuwenden, die Weiterbildung im Gespräch als die "am besten geeignete Maßnahme" festgelegt wurde, die Weiterbildung mit großer Wahrscheinlichkeit Ihre Arbeitslosigkeit vermeidet oder beendet, wenn Sie in "erheblichem Umfang" selbst versucht haben, Ihre Arbeitslosigkeit zu beenden, die Bildungsmaßnahme und der Bildungsträger zugelassen sind und Sie mit dem von Ihnen gewählten Kurs das Bildungsziel erreichen können, das Sie mit Ihrer Arbeitsagentur vorher festgelegt haben.

@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
@base <https://foerderfunke.org/default#> .

#################################################################
#    METADATA
#################################################################

<Bildungsgutschein> a <FundingProgram> ;
    <idlb> "B100019.LB.575543" ;
    dc:title "Bildungsgutschein beantragen"@de ;
    dc:description "Wenn Sie arbeitslos sind und sich weiterbilden möchten, können Sie unter bestimmten Voraussetzungen einen Bildungsgutschein bekommen. Mit einem Bildungsgutschein kann die Bundesagentur für Arbeit die Kosten Ihrer beruflichen Weiterbildung übernehmen. Bevor Sie einen Bildungsgutschein bekommen, prüft die Arbeitsagentur mit Ihnen gemeinsam, ob eine Weiterbildung für Sie notwendig ist. Einen Rechtsanspruch auf einen Bildungsgutschein haben Sie nicht. Sie können den Bildungsgutschein bei einer Bildungseinrichtung Ihrer Wahl einlösen, wenn sie für die Weiterbildungsförderung zugelassen ist. Auch die Weiterbildungsmaßnahme selbst muss zugelassen sein und zum Bildungsgutschein passen. Der Bildungsgutschein legt unter anderem fest:  das Bildungsziel, die Dauer bis zum Erreichen des Bildungsziels, die Inhalte der Qualifizierung, den regionalen Geltungsbereich und die Gültigkeitsdauer, in der der Bildungsgutschein eingelöst werden und die Teilnahme begonnen haben muss.  Der Bildungsgutschein gilt grundsätzlich an Ihrem Wohnort und an Orten, die Sie täglich von zu Hause aus erreichen können. Die Agentur für Arbeit kann auch die nötigen Fahrkosten übernehmen. Wenn Ihre Arbeitslosigkeit auch ohne Weiterbildung beendet werden kann oder es andere, besser geeignete Instrumente gibt, wird Ihnen Ihre Arbeitsagentur andere Möglichkeiten vorschlagen. Wenn Ihnen die Agentur für Arbeit während des Kurses Vermitt-lungsangebote macht, müssen Sie diese wahrnehmen, auch wenn Sie eine Weiterbildung absolvieren. Auch wenn Sie Anspruch auf Arbeitslosengeld II haben, können Sie auch nach einem Bildungsgutschein fragen. Ansprechpartner ist dann das Jobcenter. Ein Rechtsanspruch darauf besteht jedoch nicht."@de . 

#################################################################
# CONSTRAINTS
#################################################################

<BildungsgutscheinShape> a sh:NodeShape;
    <checksFundingProgram> <Bildungsgutschein> ;
    sh:targetClass <User> ;
    sh:property <WorkExperienceProperty> ; # Declare property shapes explicitly
    sh:property <ConsultationProperty> ;
    sh:property <NecessityProperty> ;
    sh:property <EducationalProgramProperty> ;
    sh:property <SelfEffortProperty> .

# User must have worked for at least three years
<WorkExperienceProperty> a sh:PropertyShape ;
    sh:path <workExperience> ;
    sh:minCount 1 ;
    sh:minInclusive 3 ;
    sh:message "Sie müssen mindestens drei Jahre berufstätig gewesen sein."@de .# Messages in German

# User must have consulted employment agency
<ConsultationProperty> a sh:PropertyShape ;
    sh:path <hasConsulted> ;
    sh:minCount 1 ;
    sh:hasValue <EmploymentAgency> ;
    sh:message "Sie müssen an einer Beratung durch die Agentur für Arbeit teilgenomme haben"@de .

# Education must be necessary to end or avoid unemployment
<NecessityProperty> a sh:PropertyShape ;
    sh:path <needsEducationFor> ;
    sh:minCount 1 ;
    sh:in (<EndUnemployment> <AvoidUnemployment>) ;
    sh:severity sh:Warning ;
    sh:message "Die Weiterbildung muss notwendig sein, um Ihre Arbeitslosigkeit zu beenden oder eine drohende Arbeitslosigkeit abzuwenden"@de .

<EducationProgramProperty> a sh:PropertyShape ;
    sh:path <selectedEducationProgram> ;
    sh:qualifiedValueShape <EducationProgramShape> ;
    sh:qualifiedMinCount 1 ;
    sh:severity sh:Warning ;
    sh:message "Die Bildungsmaßnahme und der Bildungsträger müssen zugelassen sein und sie muss im Gespräch mit der Arbeitsagentur als die 'am besten geeignete Maßname' festgelegt worden sein."@de .

<EducationProgramShape> a sh:NodeShape ;
    # Education must be declared "most suitable measure" in consultation with employment agency
    sh:property [
        sh:path <mostSuitableMeasure> ;
        sh:minCount 1 ;
        sh:hasValue true ;
    ] ;
    # Education must be approved
    sh:property [
        sh:path <isApproved> ;
        sh:minCount 1 ;
        sh:hasValue true ;
    ] ;
    # Education provider must be approved
    sh:property [
        sh:path (<hasProvider> <isApproved>) ;
        sh:minCount 1 ;
        sh:hasValue true ;
    ] .

# User must have tried to end unemployment with "considerable effort" by themselves
<SelfEffortProperty> a sh:PropertyShape ;
    sh:path <triedToEndUnemployment>;
    sh:minCount 1 ;
    sh:hasValue true ;
    sh:severity sh:Warning ;
    sh:message "Sie müssen in 'erheblichem Umfang' selbst versucht haben, Ihre Arbeitslosigkeit zu beenden."@de .